<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="es">
<head>
<!-- Generated by javadoc (1.8.0_211) on Fri Jul 03 12:25:38 CEST 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>FormularioBD</title>
<meta name="date" content="2020-07-03">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FormularioBD";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FormularioBD.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../GestorBD/BarajaBD.html" title="class in GestorBD"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../GestorBD/ResultadoBD.html" title="class in GestorBD"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?GestorBD/FormularioBD.html" target="_top">Frames</a></li>
<li><a href="FormularioBD.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">GestorBD</div>
<h2 title="Class FormularioBD" class="title">Class FormularioBD</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>GestorBD.FormularioBD</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">FormularioBD</span>
extends java.lang.Object</pre>
<div class="block">Clase de gestión de datos y comnunicación con la base de datos para el login
 y usuario con sesión activa.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../GestorBD/FormularioBD.html#FormularioBD--">FormularioBD</a></span>()</code>
<div class="block">constructor sin argumentos que inicializa el logger.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../GestorBD/FormularioBD.html#actualizarUsuario-java.lang.String-java.lang.String-java.lang.String-boolean-">actualizarUsuario</a></span>(java.lang.String&nbsp;nombre,
                 java.lang.String&nbsp;nombre_nuevo,
                 java.lang.String&nbsp;clave_nueva,
                 boolean&nbsp;cambia_nombre)</code>
<div class="block">Método que cambia el nombre, clave, o ambos, de un usuario.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../Modelo/Usuario.html" title="class in Modelo">Usuario</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../GestorBD/FormularioBD.html#cargarUsuario-Modelo.Usuario-">cargarUsuario</a></span>(<a href="../Modelo/Usuario.html" title="class in Modelo">Usuario</a>&nbsp;usuario)</code>
<div class="block">Método que carga los valores del usuario.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../GestorBD/FormularioBD.html#crearUsuario-Modelo.Usuario-">crearUsuario</a></span>(<a href="../Modelo/Usuario.html" title="class in Modelo">Usuario</a>&nbsp;usuario)</code>
<div class="block">Método para introducir un usuario a la base de datos.Antes del insert,
 realiza una select para saber si es el primer usuario que se registra y,
 en caso de serlo, le asigna el rol de administrador.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../GestorBD/FormularioBD.html#existeUsuario-Modelo.Usuario-">existeUsuario</a></span>(<a href="../Modelo/Usuario.html" title="class in Modelo">Usuario</a>&nbsp;usuario)</code>
<div class="block">Método que se lanza cuando el usuario intenta hacer login con una
 combinacion nombre/clave.El método comprueba si ese usuario existe (si no
 inicializa devolver a 0), y comprueba la clave de ese usuario, si es
 correcta inicializa devolver a 1 y sino a -1.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FormularioBD--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FormularioBD</h4>
<pre>public&nbsp;FormularioBD()</pre>
<div class="block">constructor sin argumentos que inicializa el logger.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="crearUsuario-Modelo.Usuario-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>crearUsuario</h4>
<pre>public&nbsp;int&nbsp;crearUsuario(<a href="../Modelo/Usuario.html" title="class in Modelo">Usuario</a>&nbsp;usuario)
                 throws java.sql.SQLException</pre>
<div class="block">Método para introducir un usuario a la base de datos.Antes del insert,
 realiza una select para saber si es el primer usuario que se registra y,
 en caso de serlo, le asigna el rol de administrador. Toda cuenta de
 usuario que ingrese posteriormente tendrá el rol "Estandar".

 Se inicializa una variable entera "retorno" en 1, y si no existen
 usuarios previamente se reasigna a 0. Si la inserción del usuario
 funciona, utilizando esta variable retorno se crea un registro en la
 tabla roles_usuarios con el valor 0 (Admin) o 1 (Estandar) para ese
 usuario. Si se produce un error durante la transacción la variable pasa a
 valer -1 y no se produce esta inserción.

 Si se produce una violación de clave ajena porque el nombre del usuario
 está repetido, se salta este bloque del código y llega al bloque catch,
 donde se comprueba si ya existia un usuario con ese nombre para devolver
 -2. En caso de que el usuario NO exista, escribe la excepción en el
 logger y devuelve -1.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>usuario</code> - ojeto de la clase usuario con los parámetros nombre,
 contraseña y correo que se introducen a la base de datos.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 o 1 si el usuario se agrega satisfactoriamente, -2 si ya
 existía un usuario con ese nombre y -1 si se produce otro tipo de error.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - lanza una posible excepción en el bloque finally al
 cerrar los recursos.</dd>
</dl>
</li>
</ul>
<a name="existeUsuario-Modelo.Usuario-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>existeUsuario</h4>
<pre>public&nbsp;int&nbsp;existeUsuario(<a href="../Modelo/Usuario.html" title="class in Modelo">Usuario</a>&nbsp;usuario)
                  throws java.sql.SQLException</pre>
<div class="block">Método que se lanza cuando el usuario intenta hacer login con una
 combinacion nombre/clave.El método comprueba si ese usuario existe (si no
 inicializa devolver a 0), y comprueba la clave de ese usuario, si es
 correcta inicializa devolver a 1 y sino a -1. Si se produce una excepción
 devuelve -2.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>usuario</code> - objeto usuario con la combinación nombre/clave que ha
 hecho login.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>1 si es correcto, 0 si el usuario no existe o -1 si existe pero
 la contraseña es incorrecta o -2 si se produce algún error.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - posible excepción producida en el cierre de
 recursos.</dd>
</dl>
</li>
</ul>
<a name="cargarUsuario-Modelo.Usuario-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cargarUsuario</h4>
<pre>public&nbsp;<a href="../Modelo/Usuario.html" title="class in Modelo">Usuario</a>&nbsp;cargarUsuario(<a href="../Modelo/Usuario.html" title="class in Modelo">Usuario</a>&nbsp;usuario)
                      throws java.sql.SQLException</pre>
<div class="block">Método que carga los valores del usuario. Recibe una combinación
 nombre-clave y devuelve un objeto usuario con todos los datos
 estadísticos de dicho usuario de la base de datos.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>usuario</code> - Objeto usuario que únicamente contiene los valores de
 nombre y clave.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Usuario devuelve un objeto Usuario con todos los valores respecto
 a sus datos en la base de datos.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - posible excepción producida en el cierre de
 recursos.</dd>
</dl>
</li>
</ul>
<a name="actualizarUsuario-java.lang.String-java.lang.String-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>actualizarUsuario</h4>
<pre>public&nbsp;int&nbsp;actualizarUsuario(java.lang.String&nbsp;nombre,
                             java.lang.String&nbsp;nombre_nuevo,
                             java.lang.String&nbsp;clave_nueva,
                             boolean&nbsp;cambia_nombre)
                      throws java.sql.SQLException</pre>
<div class="block">Método que cambia el nombre, clave, o ambos, de un usuario. Antes de
 hacerlo comprueba que el nombre nuevo no existe ya. El método está
 programado utilizando una programación defensiva, si el usuario existe
 previamente va a devolver un -1, si el cambio se efectúa correctamente un
 1, y sino un 0.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nombre</code> - nombre antes de actualizar</dd>
<dd><code>nombre_nuevo</code> - nombre actualizado (si lo deja en blanco es el mismo)</dd>
<dd><code>clave_nueva</code> - clave nueva (si la deja en blanco es la misma)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>1 si los cambios han ido bien, -1 si el nick esta repetido y 0 si
 no se han producido cambios.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - posible excepción producida durante el cierre de
 recursos.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FormularioBD.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../GestorBD/BarajaBD.html" title="class in GestorBD"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../GestorBD/ResultadoBD.html" title="class in GestorBD"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?GestorBD/FormularioBD.html" target="_top">Frames</a></li>
<li><a href="FormularioBD.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
